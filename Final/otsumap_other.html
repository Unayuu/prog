<!DOCTYPE html>
<html lang="ja">
<head>
<title>Kyoto Travel Map</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/style.css">
<meta http-equiv="content-type" charset="utf-8">
<link href="https://fonts.googleapis.com/css?family=M+PLUS+Rounded+1c" rel="stylesheet">
<script src="https://code.jquery.com/jquery-2.2.4.js" integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI=" crossorigin="anonymous"></script>
    <script type="text/javascript">
    $(window).load(function() {
		$('#drawer-navigation').fadeIn(0); 
    });
   $(function() {
      const hum = $('#hamburger, .close')
      const nav = $('.sp-nav')
      hum.on('click', function(){
         nav.toggleClass('toggle');
      });
   });
   </script>
</head>
<style>
img {
	border-radius: 10px;
}
b{
    color: #647f46;
}
p{
    color: #647f46;
}
</style>

<!-- header[START] -->
<header>
<body>
<h1><a href="index.html">Kyoto Travel Map</a></h1>
<nav class="pc-nav">
    <ul>
        <li><a href="otsumap_jf.html">Japanese</a></li>
        <li><a href="otsumap_cafe.html">Sweets</a></li>
        <li><a href="otsumap_other.html"><span style="color:#647f46">Other</span></a></li>
        <li><a href="otsumap_post.html">Post</a></li>
        <li><a href="index.php">Chat</a></li>
    </ul>
</nav>
<nav class="sp-nav">
    <ul>
        <li><a href="index.html">Top</a></li>
        <li><a href="otsumap_jf.html">Japanese</a></li>
        <li><a href="otsumap_cafe.html">Sweets</a></li>
        <li><a href="otsumap_other.html">Other</a></li>
        <li><a href="otsumap_post.html">Post</a></li>
        <li><a href="index.php">Chat</a></li>
        <li class="close"><span>Close</span></li>
    </ul>
</nav>
<div id="hamburger">
    <span></span>
</div>
</header>
<!-- header[END] -->

<!-- MAP[START] -->
<p2 id="hit"></p2>
<script>
    var data = sessionStorage.getItem('word');
    console.log(data);
</script>

<!--AutoSuggest[START]-->
<div id="searchBoxContainer" style="margin-left:40px; margin-bottom:20px;">
    <input type="text" id="searchBox">
</div>
<!--AutoSuggest[END]-->

<div id="myMap" style="width:100vw;height:50vh;"></div>
<script src='https://www.bing.com/api/maps/mapcontrol?callback=GetMap&key=AlWrsxZq0AWU7KFEPiNZRY-Roa_DFsN8dLfZKrGKcYZuAP_cXX6mrC8-06NLcb64' async defer></script>
<script src="./js/BmapQuery.js"></script>
<script>
    //init
    function GetMap() {
        //------------------------------------------------------------------------
        //1. Instance
        //------------------------------------------------------------------------
        const map = new Bmap("#myMap");
        //------------------------------------------------------------------------
        //2. Display Map
        //------------------------------------------------------------------------
        map.startMap(35.009992,135.759609, "load", 12);
        //----------------------------------------------------
        //3. Infobox
        //   options = new Array();
        //   options[index] = { lat, lon, width, height, title, pinColor, description, show };
        //----------------------------------------------------
        const options = [];
        options[0]={
            "lat":34.994856,
            "lon":135.785046,
            "title":"清水寺",
            "pinColor":"#647f46",
            "height":300,
            "width":320,
            "description": '★★★★☆4.3<br><img src="img/other/00.jpg" width="200"><br><a href="#down0"><p1>口コミを見る</p1></a>',
            "show":false
        };
        options[1]={
            "lat":35.015972,
            "lon":135.673757,
            "title":"天龍寺",
            "pinColor":"#647f46",
            "height":300,
            "width":320,
            "description": '★★★★☆4.3<br><img src="img/other/01.jpg" width="200"><br><a href="#down1"><p1>口コミを見る</p1></a>',
            "show":false
        };
        options[2]={
            "lat":35.039399,
            "lon":135.729374,
            "title":"鹿苑寺 金閣",
            "pinColor":"#647f46",
            "height":300,
            "width":320,
            "description": '★★★★☆4.3<br><img src="img/other/02.jpg" width="200"><br><a href="#down2"><p1>口コミを見る</p1></a>',
            "show":false
        };
        options[3]={
            "lat":35.034534,
            "lon":135.718534,
            "title":"大雲山 龍安寺",
            "pinColor":"#647f46",
            "height":300,
            "width":320,
            "description": '★★★★☆4.3<br><img src="img/other/03.jpg" width="200"><br><a href="#down3"><p1>口コミを見る</p1></a>',
            "show":false
        };
        options[4]={
            "lat":35.026864,
            "lon":135.798269,
            "title":"慈照寺 銀閣",
            "pinColor":"#647f46",
            "height":300,
            "width":320,
            "description": '★★★★☆4.3<br><img src="img/other/04.jpg" width="200"><br><a href="#down4"><p1>口コミを見る</p1></a>',
            "show":false
        };
        options[5]={
            "lat":35.043941,
            "lon":135.745954,
            "title":"大徳寺",
            "pinColor":"#647f46",
            "height":300,
            "width":320,
            "description": '★★★★☆4.1<br><img src="img/other/05.jpg" width="200"><br><a href="#down5"><p1>口コミを見る</p1></a>',
            "show":false
        };
        options[6]={
            "lat":35.013651,
            "lon":135.751695,
            "title":"元離宮二条城",
            "pinColor":"#647f46",
            "height":300,
            "width":320,
            "description": '★★★★☆4.2<br><img src="img/other/06.jpg" width="200"><br><a href="#down6"><p1>口コミを見る</p1></a>',
            "show":false
        };
        options[7]={
            "lat":35.021311,
            "lon":135.721171,
            "title":"妙心寺",
            "pinColor":"#647f46",
            "height":300,
            "width":320,
            "description": '★★★★☆4.2<br><img src="img/other/07.jpg" width="200"><br><a href="#down7"><p1>口コミを見る</p1></a>',
            "show":false
        };
        options[8]={
            "lat":35.00051,
            "lon":135.781218,
            "title":"鷲峰山 高台寺",
            "pinColor":"#647f46",
            "height":300,
            "width":320,
            "description": '★★★★☆4.5<br><img src="img/other/08.jpg" width="200"><br><a href="#down8"><p1>口コミを見る</p1></a>',
            "show":false
        };
        options[9]={
            "lat":35.043739,
            "lon":135.796198,
            "title":"詩仙堂",
            "pinColor":"#647f46",
            "height":300,
            "width":320,
            "description": '★★★★☆4.3<br><img src="img/other/09.jpg" width="200"><br><a href="#down9"><p1>口コミを見る</p1></a>',
            "show":false
        };
        map.infoboxLayers(options,true);
        map.selectedSuggestion("#searchBox","#searchBoxContainer");
    }           
</script>
<!-- MAP[END] -->

<!-- Score[START]-->
<br>
<p1 id="targetspace">
<div id ="down0" style="margin: 20px">
    <h3><b>清水寺</b></h3>
    <p>京都随一の観光スポット清水寺。訪れた11月後半は既に紅葉のピークは過ぎていましたが、紅葉なしでも見ごたえがあります。<br>
    舞台の下の部分は工事中で足場が組まれていて景観的には少し残念でしたが、今は工事も終わっているようなので、次回また訪れる機会があればよいと思いました。</p>
    <div class="scroll_button">
        <a id="scroll_top" href="#">Mapに戻る</a>
    </div>
</div> 
<div id ="down1" style="margin: 20px">
    <h3><b>天龍寺</b></h3>
    <p>10月の終わりに行きました。紅葉にはまだ少し早かったですが、色付き始めもきれいでした。<br>
    沢山の種類の花や草木があるので、また違った季節に来てみたいなと思いました。<br>
    龍雲図もかなり迫力があり、見応えがあります。</p>
    <div class="scroll_button">
        <a id="scroll_top" href="#">Mapに戻る</a>
    </div>
</div> 
<div id ="down2" style="margin: 20px">
    <h3><b>鹿苑寺 金閣</b></h3>
    <p>数十年ぶりの訪問で、中学の修学旅行以来だったため記憶も薄れてきてました。<br>
    拝観料を払って進むと、まばゆいばかりの金閣寺（舎利殿）が出現。まさに豪華絢爛でインパクトは大きいです。また、ゆっくり境内を見てまわると、それ以外にも鐘楼、舟形石や鏡湖池など見所は多いと思いました。<br>
    大人になって改めて訪れるとまた違った見方ができるかもしれません。</p>
    <div class="scroll_button">
        <a id="scroll_top" href="#">Mapに戻る</a>
    </div>
</div>     
<div id ="down3" style="margin: 20px">
    <h3><b>大雲山 龍安寺</b></h3>
    <p>コロナの影響で団体の観光客も少なく、ゆっくりのんびりと見て回れました。<br>
    心静かに、縁側に座って庭を眺めることができました。侘び寂びとはこのことですね。 石庭以外にも池やお庭が美しいので、ぜひ行ってみてください。</p>
    <div class="scroll_button">
        <a id="scroll_top" href="#">Mapに戻る</a>
    </div>
</div>
<div id ="down4" style="margin: 20px">
    <h3><b>慈照寺 銀閣</b></h3>
    <p>銀閣寺に初めて行ったのは、高校生の時だったと思う。金閣寺と違って地味なイメージの銀閣寺は大人になってからの方がその良さに気づけて良いと思った。<br>
    落ち着いた雰囲気で、古き良き日本の文化の象徴だと思う。周りをぐるりと歩けるのもとっても良いと思った。<br>
    砂で模様を作っているところとかもあって、見所たくさん。</p>
    <div class="scroll_button">
        <a id="scroll_top" href="#">Mapに戻る</a>
    </div>
</div>   
<div id ="down5" style="margin: 20px">
    <h3><b>大徳寺</b></h3>
    <p>金毛閣のワラジは、説明員の方でも見たことがないとのこと。撮影できませんでしたが、CMに流れている前庭が落ち着きました。<br>
    唐門は聚楽第の一部が使われているそうですが、全体的には東照宮のイメージをうけました。<br>
    天井龍（鳴き龍）もいいです。拝観料800円は高くありません。</p>
    <div class="scroll_button">
        <a id="scroll_top" href="#">Mapに戻る</a>
    </div>
</div>
<div id ="down6" style="margin: 20px">
    <h3><b>元離宮二条城</b></h3>
    <p>学生の時以来、20年以上ぶりに訪問。<br>
    あの時とは感じ方も違い、とても感慨深く見ることができました。開城と同時に入れたので、鶯張りの廊下も二人だけで堪能。<br>
    とても良い時間を過ごすことができました。</p>
    <div class="scroll_button">
        <a id="scroll_top" href="#">Mapに戻る</a>
    </div>
</div>
<div id ="down7" style="margin: 20px">
    <h3><b>妙心寺</b></h3>
    <p>京都エリア散策時に立ち寄り。臨済宗妙心寺派の大本山の妙心寺。<br>
    敷地内は非常に広く、のんびり散策してるとあっという間に時間が過ぎてしまいます。<br>
    ＪＲ嵯峨野線花園駅から徒歩圏内ですが、駅周辺に飲食店は少ない、というかほぼ無いのでご注意を。</p>
    <div class="scroll_button">
        <a id="scroll_top" href="#">Mapに戻る</a>
    </div>
</div>
<div id ="down8" style="margin: 20px">
    <h3><b>鷲峰山 高台寺</b></h3>
    <p>秀吉の正室・ねねが眠っている高台寺に行きました。<br>
    石畳の階段を上がると現れます。ねねと秀吉像があるお堂は見事でした。秀吉の墓・豊国廟とセットで行くのがオススメです！</p>
    <div class="scroll_button">
        <a id="scroll_top" href="#">Mapに戻る</a>
    </div>
</div>
<div id ="down9" style="margin: 20px">
    <h3><b>詩仙堂</b></h3>
    <p>前回は紅葉がとても綺麗なころに訪れましたが、今回は新緑がとても綺麗でした。<br>
    詩仙堂は石川丈山が隠居生活を送るために建てた山荘です。手入れが施された庭園がメイン、どこから観ても見事です。<br>
    周りの建物や音も一切聴こえないので、現実からちょっと離れたいと思う時には訪れてみるといいですね。平日は観光客も少ないです。</p>
    <div class="scroll_button">
        <a id="scroll_top" href="#">Mapに戻る</a>
    </div>
</div>
</p1>
<!-- Score[END]-->
</body>
</html>

<!-- scroll.action START -->
<script>
    $(function(){
        $("a#scroll_top[href^=#]").click(function(){
            var speed = 1200;
            var href = $(this).attr("href");
            var target = $(href == "#" || href == ""?"html" : href);
            var position = target.offset().top;
    
            $("body, html").animate({scrollTop:position}, speed, "swing");
            return false;
        });
    });
</script>
<!-- scroll.action END -->

<script>
    // ▼①元のHTMLソースを保持しておく変数
    var backupOriginal = "";
    // ▼②文字列を検索してハイライト用要素を加える処理
    function replacer( str, word , att  ) {
        var SearchString = '(' + word + ')';
        var RegularExp = new RegExp( SearchString, "g" );
        var ReplaceString = '<span class="' + att + '">$1</span>';
        var ResString = str.replace( RegularExp , ReplaceString );
        //ハイライト文字数カウント
        var count5=str.match(RegularExp).length;
        console.log(count5);
        // sessionStorage.setItem('count5', count5);
        // alert(count5+'個ヒットしました。');
        var hello = document.getElementById("hit");
        hello.innerHTML = "<p2>"+count5+"個ヒットしました!</p2>";
        return ResString;
    }
    // ▼③ハイライトを加える処理
    function addhighlight() {
        backupOriginal = document.getElementById("targetspace").innerHTML;
        var forShow = backupOriginal;
        // word=$("#search-input").val()
        forShow = replacer( forShow, data, "mark1" );
        document.getElementById("targetspace").innerHTML = forShow;
    }
    // ▼④ハイライトを消す処理
    function clearhighlight() {
        document.getElementById("targetspace").innerHTML = backupOriginal;  // バックアップから書き戻す
        backupOriginal = "";    // バックアップを消す
    }
    // ▼⑤ハイライトを加えるか消すかを判断
    function highlightcheck() {
        if( backupOriginal.length == 0 ) {
            // 何もバックアップされていなければ（未ハイライトなので）ハイライトを加える
            // $("#btn-onoff2").val("表示ON")
            addhighlight();
        }
        else {
            // 何かバックアップされていれば（ハイライト済みなので）ハイライトを消す
            // $("#btn-onoff2").val("表示OFF")
            clearhighlight();
        }
    }
    // ▼⑥ボタンクリックイベントに、上記の関数を割り当てる
    if(data!==""){
        highlightcheck();
    }
    // document.getElementById("btn-onoff2").onclick  = highlightcheck;
    </script>

 <!-- footer[START] -->
 <footer>
    <div class="f-menu">
        <ul>
            <li><a href="index.html">Top</a></li>
            <li><a href="otsumap_jf.html">Japanese</a></li>
            <li><a href="otsumap_cafe.html">Sweets</a></li>
            <li><a href="otsumap_other.html">Other</a></li>
            <li><a href="otsumap_post.html">Post</a></li>
            <li><a href="index.php">Chat</a></li>
        </ul>
    </div>
    <p>&copy;Kyoto Travel Map.2021.</p>
</footer>
<!-- footer[END] -->